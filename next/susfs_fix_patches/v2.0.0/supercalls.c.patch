--- a/kernel/supercalls.c
+++ b/kernel/supercalls.c
@@ -119,6 +119,9 @@
 			boot_complete_lock = true;
 			pr_info("boot_complete triggered\n");
 			on_boot_completed();
+ #ifdef CONFIG_KSU_SUSFS_SUS_MOUNT
+			susfs_is_boot_completed_triggered = true;
+ #endif
 		}
 		break;
 	}
@@ -401,7 +404,9 @@
 static int do_manage_mark(void __user *arg)
 {
 	struct ksu_manage_mark_cmd cmd;
+ #ifndef CONFIG_KSU_SUSFS
 	int ret = 0;
+ #endif
 
 	if (copy_from_user(&cmd, arg, sizeof(cmd))) {
 		pr_err("manage_mark: copy_from_user failed\n");
@@ -410,6 +415,7 @@
 
 	switch (cmd.operation) {
 	case KSU_MARK_GET: {
+ #ifndef CONFIG_KSU_SUSFS
 		// Get task mark status
 		ret = ksu_get_task_mark(cmd.pid);
 		if (ret < 0) {
@@ -418,8 +424,13 @@
 		}
 		cmd.result = (u32)ret;
 		break;
+ #else
+		cmd.result = 0;
+		break;
+ #endif
 	}
 	case KSU_MARK_MARK: {
+ #ifndef CONFIG_KSU_SUSFS
 		if (cmd.pid == 0) {
 			ksu_mark_all_process();
 		} else {
@@ -430,9 +441,15 @@
 				return ret;
 			}
 		}
+ #else
+		if (cmd.pid != 0) {
+			return 0;
+		}
+ #endif
 		break;
 	}
 	case KSU_MARK_UNMARK: {
+ #ifndef CONFIG_KSU_SUSFS
 		if (cmd.pid == 0) {
 			ksu_unmark_all_process();
 		} else {
@@ -443,11 +460,20 @@
 				return ret;
 			}
 		}
+ #else
+		if (cmd.pid != 0) {
+			return 0;
+		}
+ #endif
 		break;
 	}
 	case KSU_MARK_REFRESH: {
+ #ifndef CONFIG_KSU_SUSFS
 		ksu_mark_running_process();
 		pr_info("manage_mark: refreshed running processes\n");
+ #else
+		pr_info("susfs: cmd: KSU_MARK_REFRESH: do nothing\n");
+ #endif
 		break;
 	}
 	default: {
@@ -886,22 +912,28 @@
 	int i;
 
     pr_info("KernelSU IOCTL Commands:\n");
-    for (i = 0; ksu_ioctl_handlers[i].handler; i++) {
-        pr_info("  %-18s = 0x%08x\n", ksu_ioctl_handlers[i].name,
-                ksu_ioctl_handlers[i].cmd);
-    }
+	for (i = 0; ksu_ioctl_handlers[i].handler; i++) {
+		pr_info("  %-18s = 0x%08x\n", ksu_ioctl_handlers[i].name,
+			ksu_ioctl_handlers[i].cmd);
+	}
 
+#ifndef CONFIG_KSU_SUSFS
 	int rc = register_kprobe(&reboot_kp);
 	if (rc) {
 		pr_err("reboot kprobe failed: %d\n", rc);
 	} else {
 		pr_info("reboot kprobe registered successfully\n");
 	}
+#endif
 }
 
 void ksu_supercalls_exit(void)
 {
-    unregister_kprobe(&reboot_kp);
+#ifndef CONFIG_KSU_SUSFS
+	unregister_kprobe(&reboot_kp);
+#else
+	pr_info("susfs: do nothing\n");
+#endif
 }
 
 // IOCTL dispatcher
